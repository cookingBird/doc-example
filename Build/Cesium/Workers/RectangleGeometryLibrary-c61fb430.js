define(["exports","./Cartographic-67e73ef9","./when-92c6cf3c","./Check-52a7d806","./Intersect-b97e930a","./Math-92c3b5f7","./GeometryAttribute-9bdde6dc","./Rectangle-bab7abf0"],(function(t,n,a,r,e,o,s,i){"use strict";var h=Math.cos,g=Math.sin,c=Math.sqrt,u={computePosition:function(t,n,r,e,o,s,i){var u=n.radiiSquared,l=t.nwCorner,C=t.boundingRectangle,d=l.latitude-t.granYCos*e+o*t.granXSin,S=h(d),w=g(d),f=u.z*w,X=l.longitude+e*t.granYSin+o*t.granXCos,Y=S*h(X),O=S*g(X),v=u.x*Y,_=u.y*O,p=c(v*Y+_*O+f*w);if(s.x=v/p,s.y=_/p,s.z=f/p,r){var M=t.stNwCorner;a.e(M)?(d=M.latitude-t.stGranYCos*e+o*t.stGranXSin,X=M.longitude+e*t.stGranYSin+o*t.stGranXCos,i.x=(X-t.stWest)*t.lonScalar,i.y=(d-t.stSouth)*t.latScalar):(i.x=(X-C.west)*t.lonScalar,i.y=(d-C.south)*t.latScalar)}}},l=new s.f,C=new n.t,d=new n.t$1,S=new n.t,w=new e.n;function f(t,a,r,e,o,i,h){var g=Math.cos(a),c=e*g,u=r*g,d=Math.sin(a),f=e*d,X=r*d;C=w.project(t,C),C=n.t.subtract(C,S,C);var Y=s.f.fromRotation(a,l);C=s.f.multiplyByVector(Y,C,C),C=n.t.add(C,S,C),i-=1,h-=1;var O=(t=w.unproject(C,t)).latitude,v=O+i*X,_=O-c*h,p=O-c*h+i*X,M=Math.max(O,v,_,p),R=Math.min(O,v,_,p),b=t.longitude,I=b+i*u,W=b+h*f,m=b+h*f+i*u;return{north:M,south:R,east:Math.max(b,I,W,m),west:Math.min(b,I,W,m),granYCos:c,granYSin:f,granXCos:u,granXSin:X,nwCorner:t}}u.computeOptions=function(t,n,a,e,s,h,g){var c=t.east,u=t.west,l=t.north,C=t.south,X=!1,Y=!1;l===o.e.PI_OVER_TWO&&(X=!0),C===-o.e.PI_OVER_TWO&&(Y=!0);var O,v,_,p,M,R=l-C;_=(M=u>c?o.e.TWO_PI-u+c:c-u)/((O=Math.ceil(M/n)+1)-1),p=R/((v=Math.ceil(R/n)+1)-1);var b=i.h.northwest(t,h),I=i.h.center(t,d);(0!==a||0!==e)&&(I.longitude<b.longitude&&(I.longitude+=o.e.TWO_PI),S=w.project(I,S));var W=p,m=_,G=i.h.clone(t,s),P={granYCos:W,granYSin:0,granXCos:m,granXSin:0,nwCorner:b,boundingRectangle:G,width:O,height:v,northCap:X,southCap:Y};if(0!==a){var T=f(b,a,_,p,0,O,v);if(l=T.north,C=T.south,c=T.east,u=T.west,l<-o.e.PI_OVER_TWO||l>o.e.PI_OVER_TWO||C<-o.e.PI_OVER_TWO||C>o.e.PI_OVER_TWO)throw new r.t("Rotated rectangle is invalid.  It crosses over either the north or south pole.");P.granYCos=T.granYCos,P.granYSin=T.granYSin,P.granXCos=T.granXCos,P.granXSin=T.granXSin,G.north=l,G.south=C,G.east=c,G.west=u}if(0!==e){a-=e;var x=i.h.northwest(G,g),y=f(x,a,_,p,0,O,v);P.stGranYCos=y.granYCos,P.stGranXCos=y.granXCos,P.stGranYSin=y.granYSin,P.stGranXSin=y.granXSin,P.stNwCorner=x,P.stWest=y.west,P.stSouth=y.south}return P},t.j=u}));
