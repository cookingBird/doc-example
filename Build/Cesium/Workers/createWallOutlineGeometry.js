define(["./when-92c6cf3c","./Rectangle-bab7abf0","./buildModuleUrl-d4759655","./Cartographic-67e73ef9","./ComponentDatatype-81047f82","./Check-52a7d806","./GeometryAttribute-9bdde6dc","./GeometryAttributes-7f66ea53","./IndexDatatype-4c0e98b8","./Math-92c3b5f7","./PrimitiveType-e79c54d1","./WallGeometryLibrary-6e9cd7ba","./Intersect-b97e930a","./Event-3390cd7d","./RuntimeError-c6a62a80","./WebGLConstants-71f10989","./Cartesian2-6033fa5d","./FeatureDetection-067cb23c","./Cartesian4-ad128b5d","./arrayRemoveDuplicates-f7eaafa2","./PolylinePipeline-3d55cf8f","./EllipsoidGeodesic-04ac0e77","./EllipsoidRhumbLine-8847d1a1","./IntersectionTests-9cfe2e56","./Plane-b5be516c"],(function(e,i,t,n,r,a,o,s,m,u,l,p,h,c,d,g,f,y,v,w,_,b,H,E,k){"use strict";var A=new n.t,x=new n.t;function L(t){var r=(t=e.u(t,e.u.EMPTY_OBJECT)).positions,o=t.maximumHeights,s=t.minimumHeights;if(!e.e(r))throw new a.t("options.positions is required.");if(e.e(o)&&o.length!==r.length)throw new a.t("options.positions and options.maximumHeights must have the same length.");if(e.e(s)&&s.length!==r.length)throw new a.t("options.positions and options.minimumHeights must have the same length.");var m=e.u(t.granularity,u.e.RADIANS_PER_DEGREE),l=e.u(t.ellipsoid,i.t.WGS84);this._positions=r,this._minimumHeights=s,this._maximumHeights=o,this._granularity=m,this._ellipsoid=i.t.clone(l),this._workerName="createWallOutlineGeometry";var p=1+r.length*n.t.packedLength+2;e.e(s)&&(p+=s.length),e.e(o)&&(p+=o.length),this.packedLength=p+i.t.packedLength+1}L.pack=function(t,r,o){if(!e.e(t))throw new a.t("value is required");if(!e.e(r))throw new a.t("array is required");o=e.u(o,0);var s,m=t._positions,u=m.length;for(r[o++]=u,s=0;s<u;++s,o+=n.t.packedLength)n.t.pack(m[s],r,o);var l=t._minimumHeights;if(u=e.e(l)?l.length:0,r[o++]=u,e.e(l))for(s=0;s<u;++s)r[o++]=l[s];var p=t._maximumHeights;if(u=e.e(p)?p.length:0,r[o++]=u,e.e(p))for(s=0;s<u;++s)r[o++]=p[s];return i.t.pack(t._ellipsoid,r,o),r[o+=i.t.packedLength]=t._granularity,r};var P=i.t.clone(i.t.UNIT_SPHERE),D={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:P,granularity:void 0};return L.unpack=function(t,r,o){if(!e.e(t))throw new a.t("array is required");r=e.u(r,0);var s,m,u,l=t[r++],p=new Array(l);for(s=0;s<l;++s,r+=n.t.packedLength)p[s]=n.t.unpack(t,r);if((l=t[r++])>0)for(m=new Array(l),s=0;s<l;++s)m[s]=t[r++];if((l=t[r++])>0)for(u=new Array(l),s=0;s<l;++s)u[s]=t[r++];var h=i.t.unpack(t,r,P),c=t[r+=i.t.packedLength];return e.e(o)?(o._positions=p,o._minimumHeights=m,o._maximumHeights=u,o._ellipsoid=i.t.clone(h,o._ellipsoid),o._granularity=c,o):(D.positions=p,D.minimumHeights=m,D.maximumHeights=u,D.granularity=c,new L(D))},L.fromConstantHeights=function(i){var t=(i=e.u(i,e.u.EMPTY_OBJECT)).positions;if(!e.e(t))throw new a.t("options.positions is required.");var n,r,o=i.minimumHeight,s=i.maximumHeight,m=e.e(o),u=e.e(s);if(m||u){var l=t.length;n=m?new Array(l):void 0,r=u?new Array(l):void 0;for(var p=0;p<l;++p)m&&(n[p]=o),u&&(r[p]=s)}return new L({positions:t,maximumHeights:r,minimumHeights:n,ellipsoid:i.ellipsoid})},L.createGeometry=function(i){var a=i._positions,h=i._minimumHeights,c=i._maximumHeights,d=i._granularity,g=i._ellipsoid,f=p.D.computePositions(g,a,c,h,d,!1);if(e.e(f)){var y,v=f.pos.bottomPositions,w=f.pos.topPositions,_=w.length,b=2*_,H=new Float64Array(b),E=0;for(_/=3,y=0;y<_;++y){var k=3*y,L=n.t.fromArray(w,k,A),P=n.t.fromArray(v,k,x);H[E++]=P.x,H[E++]=P.y,H[E++]=P.z,H[E++]=L.x,H[E++]=L.y,H[E++]=L.z}var D=new s.a({position:new o.o({componentDatatype:r.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:H})}),C=b/3;b=2*C-4+C;var G=m.IndexDatatype.createTypedArray(C,b),I=0;for(y=0;y<C-2;y+=2){var T=y,R=y+2,q=n.t.fromArray(H,3*T,A),S=n.t.fromArray(H,3*R,x);if(!n.t.equalsEpsilon(q,S,u.e.EPSILON10)){var N=y+1,O=y+3;G[I++]=N,G[I++]=T,G[I++]=N,G[I++]=O,G[I++]=T,G[I++]=R}}return G[I++]=C-2,G[I++]=C-1,new o.I({attributes:D,indices:G,primitiveType:l._0x23ab5a.LINES,boundingSphere:new t.i.fromVertices(H)})}},function(t,n){return e.e(n)&&(t=L.unpack(t,n)),t._ellipsoid=i.t.clone(t._ellipsoid),L.createGeometry(t)}}));
