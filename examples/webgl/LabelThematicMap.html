<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>标签专题图</title>
    <link href="../../Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <link href="./css/pretty.css" rel="stylesheet">
    <script src="./js/jquery.min.js"></script>
    <script src="./js/config.js"></script>
    <script src="./js/spectrum.js"></script>
    <script type="text/javascript" src="../../Build/Cesium/Cesium.js"></script>
</head>
<body>
<div id="cesiumContainer"></div>
<div id='loadingbar' class="spinner">
    <div class="spinner-container container1">
        <div class="circle1"></div>
        <div class="circle2"></div>
        <div class="circle3"></div>
        <div class="circle4"></div>
    </div>
    <div class="spinner-container container2">
        <div class="circle1"></div>
        <div class="circle2"></div>
        <div class="circle3"></div>
        <div class="circle4"></div>
    </div>
    <div class="spinner-container container3">
        <div class="circle1"></div>
        <div class="circle2"></div>
        <div class="circle3"></div>
        <div class="circle4"></div>
    </div>
</div>


<script type="text/javascript">
    function onload(Cesium) {
        //初始化viewer部件
        var viewer = new Cesium.Viewer('cesiumContainer', {});
        var scene = viewer.scene;
        scene.lightSource.ambientLightColor = new Cesium.Color(0.65, 0.65, 0.65, 1);
        var widget = viewer.cesiumWidget;
        viewer.scene.sun.show = true;


        try {
            //开启泛光和HDR
            viewer.scene.bloomEffect.show = true;
            viewer.scene.hdrEnabled = true;
            viewer.scene.bloomEffect.threshold = 0.8;
            viewer.scene.bloomEffect.bloomIntensity = 1;

            var promise = scene.open('http://www.supermapol.com/realspace/services/3D-build/rest/realspace');
            Cesium.when.all(promise, function (layers) {
                
                var layer0 = scene.layers.find("buildpoint");
                layer0.indexedDBSetting.isAttributesSave = true;//保存属性
                layer0.showLabel = true;

                layer0.labelStyle = new Cesium.S3MTilesLabelStyle({
                    fillColor: Cesium.Color.WHITE,
                    outlineColor: Cesium.Color.RED,
                    font: '44px Calibri',
                    outlineWidth: 2.0,
                    scale: 0.5,
                    fillStyle: Cesium.LabelStyle.FILL_AND_OUTLINE,
                    textField: 'NAME',
                    pixelOffset: new Cesium.Cartesian2(0, -5)
                });
            });


        } catch (e) {
            if (widget._showRenderLoopErrors) {
                var title = '渲染时发生错误，已停止渲染。';
                widget.showErrorPanel(title, undefined, e);
            }
        }

        $('#loadingbar').remove();

    }
	if (typeof Cesium !== 'undefined') {
        window.startupCalled = true;
        onload(Cesium);
    }
</script>
</body>

</html>